# FlatsimDashboard

## An interactive Python notebook to explore Flatsim Sentinel-1 InSAR time-series

This interactive notebook allows for exploring an InSAR data cube generated by [ForM@Ter FLATSIM service](https://www.poleterresolide.fr/projets/en-cours/flatsim/). Please refer to [Thollard et al., 2021](https://www.mdpi.com/2072-4292/13/18/3734) for technical details of the FLATSIM service.

This tool relies on Python libraries [Holoviews](https://holoviews.org/) and [Panel](https://panel.holoviz.org/).

Demo video [here](https://github.com/RaphaelGrandin/FlatsimDashboard/blob/a6f200baec78461ad90a91944d0bdeaa8d3aca85/Flatsim_Dashboard_Demo_Afar_RG_reduced.mp4)

If you use this code (or part of it), please send me an e-mail. :)

![Screenshot of demo video displaying an example with an InSAR map on the left, and a time-series on the right](https://github.com/RaphaelGrandin/FlatsimDashboard/blob/main/Flatsim_Dashboard_Demo_Peru_capture.jpg)

## Features

- Left panel: map showing the cumulative displacement up to the selected frame. Temporal slider to the right allows for changing the selected frame.
- Control widgets at the bottom allow for changing the colorbar and min/max values.
- Right panels:
  - top: time-series of selected pixel in the map. Upper time-series is the "raw" time-series. Use "lasso tool" to select a subset of points in the time-series and estimate a linear trend on-the-fly.
  - bottom: time-series extracted on a rectangular area selected on the map. You may use this second time-series as a "reference", that may be subtracted to the pixel-derived time-series (use the tick box to apply the subtraction).



## Installation

In order to run the notebook, you may need to install a few libraries.

Here is the recipe to create a fresh conda environment that embeds the necessary libraries:
```code
conda create --name GeoViews_py39 python=3.9 \
  geoviews-core \
  datashader \
  matplotlib \
  netcdf4 \
  pyproj \
  pyarrow \
  fastparquet \
  python-snappy \
  hvplot \
  ipywidgets \
  pooch \
  rioxarray \
  intake intake-parquet intake-xarray \
  s3fs \
  pykml \
  --yes

conda activate GeoViews_py39
```

